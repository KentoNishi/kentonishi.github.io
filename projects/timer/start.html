<script src="https://www.gstatic.com/firebasejs/5.0.3/firebase.js"></script>
<button onclick="starter();">START</button>
<button onclick="clearall();">CLEAR</button>

<script>
  window.onload=function(){
    clearall();
  }
  var start=0;
  var go=false;
  function starter(){
    start=new Date().getTime();
    go=true;
  }
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyD1wxkBnNNCmvJ0VONthEUKhtVdq5cxNDU",
    authDomain: "track-and-field-live-timer.firebaseapp.com",
    databaseURL: "https://track-and-field-live-timer.firebaseio.com",
    projectId: "track-and-field-live-timer",
    storageBucket: "track-and-field-live-timer.appspot.com",
    messagingSenderId: "1013172515547"
  };
  firebase.initializeApp(config);
  function clearall(){
    go=false;
    start=0;
    document.querySelectorAll(".rank")[0].innerHTML="";
    firebase.database().ref('times').remove();
  }
  var alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  for(var i=0;i<10;i++){
    var starCountRef = firebase.database().ref('times/' + alphabet[i]+"/time");
    starCountRef.on('value', function(snapshot) {
      update(snapshot.val());
    });
  }
  function update(value){
    if(value!=null&&go==true){
     var letter=value.split(",")[0];
     var time=parseInt(value.split(",")[1]);
     console.log(letter+" - "+((start-time)*-1).toString());
     rank(letter,((start-time)/1000*-1).toString());
     //console.log(letter);
     //console.log(time);
    }else{
     clearall();
    }
  }
  function rank(letter,time){
    document.querySelectorAll(".rank")[0].innerHTML+=letter+" : "+time+"<br />";
  }
</script>

<div class="rank"></div>
